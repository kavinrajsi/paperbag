{% liquid
  assign heading = section.settings.heading
  assign heading_alignment = section.settings.heading_alignment | default: 'left'
  assign columns = section.settings.desktop_columns | default: 2
  assign gap = section.settings.item_gap | default: 24
%}

<section
  id="banner-two-{{ section.id }}"
  class="banner-two banner-two--align-{{ heading_alignment }}"
  aria-label="{{ 'sections.banner_2.aria_label' | t }}"
>
  <div class="banner-two__container">
    {% if heading != blank %}
      <header class="banner-two__header">
        <h2 class="banner-two__heading">{{ heading | escape }}</h2>
      </header>
    {% endif %}

    {% if section.blocks.size > 0 %}
      <div
        class="banner-two__list"
        role="list"
        style="--banner-two-columns: {{ columns }}; --banner-two-gap: {{ gap }}px;"
      >
        {% for block in section.blocks %}
          {% liquid
            assign desktop_image = block.settings.desktop_image
            assign mobile_image = block.settings.mobile_image | default: desktop_image
            assign alt_text = block.settings.image_alt | default: block.settings.title | default: shop.name
            assign title = block.settings.title
            assign link_url = block.settings.link_url | default: '#'
            assign target = block.settings.link_target | default: '_self'
            assign link_aria_title = title | default: alt_text
            assign link_aria_label = 'sections.banner_2.link_aria_label' | t: title: link_aria_title
          %}

          <article class="banner-two__item" role="listitem" {{ block.shopify_attributes }}>
            <a
              class="banner-two__link"
              href="{{ link_url }}"
              target="{{ target }}"
              {% if target == '_blank' %}
                rel="noopener noreferrer"
              {% endif %}
              aria-label="{{ link_aria_label }}"
            >
              <div class="banner-two__media">
                {% if desktop_image %}
                  <picture class="banner-two__picture">
                    {% if block.settings.mobile_image %}
                      <source
                        media="(max-width: 749px)"
                        srcset="{{ mobile_image | image_url: width: 960 }}"
                      >
                    {% endif %}
                    {{ desktop_image | image_url: width: 2000 | image_tag: loading: 'lazy', class: 'banner-two__image', alt: alt_text | escape }}
                  </picture>
                {% else %}
                  <div class="banner-two__placeholder" aria-hidden="true">
                    {{ 'collection-1' | placeholder_svg_tag }}
                  </div>
                {% endif %}
              </div>

              {% if title != blank %}
                <div class="banner-two__content">
                  <p class="banner-two__title">{{ title | escape }}</p>
                </div>
              {% endif %}
            </a>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <p class="banner-two__empty">{{ 'sections.banner_2.empty' | t }}</p>
    {% endif %}
  </div>
</section>

{% stylesheet %}
  .banner-two {
    padding: 48px 16px;
  }

  .banner-two__container {
    margin: 0 auto;
    max-width: 1200px;
  }

  .banner-two__header {
    margin-bottom: 32px;
  }

  .banner-two--align-center .banner-two__heading {
    text-align: center;
  }

  .banner-two__heading {
    margin: 0;
    font-size: clamp(1.75rem, 2vw, 2.5rem);
  }

  .banner-two__list {
    display: grid;
    gap: var(--banner-two-gap, 24px);
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }

  @media (min-width: 750px) {
    .banner-two__list {
      grid-template-columns: repeat(var(--banner-two-columns, 2), minmax(0, 1fr));
    }
  }

  .banner-two__item {
    position: relative;
  }

  .banner-two__link {
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: inherit;
    border-radius: 12px;
    overflow: hidden;
    background-color: rgba(0, 0, 0, 0.02);
  }

  .banner-two__media {
    position: relative;
  }

  .banner-two__picture,
  .banner-two__image {
    display: block;
    width: 100%;
  }

  .banner-two__image {
    height: 100%;
    object-fit: cover;
  }

  .banner-two__placeholder {
    aspect-ratio: 3 / 2;
    background: rgba(0, 0, 0, 0.05);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .banner-two__content {
    padding: 16px 20px 20px;
  }

  .banner-two__title {
    margin: 0;
    font-size: 1rem;
    font-weight: 500;
  }

  .banner-two__empty {
    margin: 0;
    text-align: center;
    color: rgba(0, 0, 0, 0.6);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.banner_2.name",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.banner_2.settings.heading.label"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "t:sections.banner_2.settings.heading_alignment.label",
      "default": "left",
      "options": [
        { "value": "left", "label": "t:sections.banner_2.settings.heading_alignment.options.left" },
        { "value": "center", "label": "t:sections.banner_2.settings.heading_alignment.options.center" }
      ]
    },
    {
      "type": "range",
      "id": "desktop_columns",
      "label": "t:sections.banner_2.settings.desktop_columns.label",
      "min": 1,
      "max": 4,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "item_gap",
      "label": "t:sections.banner_2.settings.item_gap.label",
      "min": 0,
      "max": 80,
      "default": 24,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "banner_item",
      "name": "t:sections.banner_2.blocks.banner_item.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "desktop_image",
          "label": "t:sections.banner_2.blocks.banner_item.settings.desktop_image.label"
        },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "t:sections.banner_2.blocks.banner_item.settings.mobile_image.label",
          "info": "t:sections.banner_2.blocks.banner_item.settings.mobile_image.info"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "t:sections.banner_2.blocks.banner_item.settings.image_alt.label",
          "info": "t:sections.banner_2.blocks.banner_item.settings.image_alt.info"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.banner_2.blocks.banner_item.settings.title.label"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "t:sections.banner_2.blocks.banner_item.settings.link_url.label"
        },
        {
          "type": "select",
          "id": "link_target",
          "label": "t:sections.banner_2.blocks.banner_item.settings.link_target.label",
          "default": "_self",
          "options": [
            { "value": "_self", "label": "t:sections.banner_2.blocks.banner_item.settings.link_target.options._self" },
            { "value": "_blank", "label": "t:sections.banner_2.blocks.banner_item.settings.link_target.options._blank" }
          ]
        }
      ]
    }
  ],
  "max_blocks": 1,
  "presets": [
    {
      "name": "t:sections.banner_2.name",
      "blocks": [
        { "type": "banner_item" }
      ]
    }
  ]
}
{% endschema %}
